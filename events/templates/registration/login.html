{% extends 'base.html' %}
{% load static %}

{% block title %}Sign In â€” iZoza{% endblock %}

{% block extra_css %}
<style>
/* Auth Page Layout */
.auth-page {
  min-height: calc(100vh - 72px);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 2rem 1rem;
  position: relative;
  overflow: hidden;
}

.auth-page::before {
  content: '';
  position: absolute;
  top: -50%;
  right: -20%;
  width: 800px;
  height: 800px;
  background: radial-gradient(circle, var(--coral-glow) 0%, transparent 70%);
  opacity: 0.15;
  animation: float 20s ease-in-out infinite;
}

@keyframes float {
  0%, 100% { transform: translate(0, 0) scale(1); }
  50% { transform: translate(-50px, 50px) scale(1.1); }
}

.auth-card {
  width: 100%;
  max-width: 440px;
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 24px;
  box-shadow: var(--shadow-lg);
  overflow: hidden;
  animation: fadeUp 0.6s var(--ease);
}

@keyframes fadeUp {
  from { opacity: 0; transform: translateY(30px); }
  to { opacity: 1; transform: translateY(0); }
}

.auth-header {
  background: var(--bg-secondary);
  border-bottom: 1px solid var(--glass-border);
  padding: 2.5rem 2rem;
  text-align: center;
}

.auth-icon {
  width: 72px;
  height: 72px;
  background: var(--coral-bg);
  border: 1px solid rgba(255, 77, 77, 0.2);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 1.5rem;
  color: var(--coral);
  font-size: 1.8rem;
  animation: pulse-icon 2s ease-in-out infinite;
}

@keyframes pulse-icon {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

.auth-header h1 {
  font-family: var(--font-display);
  font-size: 2rem;
  font-weight: 800;
  color: var(--text-primary);
  margin-bottom: 0.5rem;
}

.auth-header p {
  color: var(--text-secondary);
}

.auth-body {
  padding: 2.5rem 2rem;
}

.form-group {
  margin-bottom: 1.75rem;
}

.form-label {
  display: block;
  font-size: 0.875rem;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 0.5rem;
}

.form-input {
  width: 100%;
  padding: 0.875rem 1rem;
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 12px;
  font-size: 0.95rem;
  color: var(--text-primary);
  transition: all var(--t-base);
}

.form-input::placeholder {
  color: var(--text-tertiary);
}

.form-input:focus {
  outline: none;
  background: var(--bg-tertiary);
  border-color: var(--coral);
  box-shadow: 0 0 0 3px var(--coral-glow);
}

.password-wrapper {
  position: relative;
}

.password-toggle {
  position: absolute;
  right: 1rem;
  top: 50%;
  transform: translateY(-50%);
  background: transparent;
  border: none;
  color: var(--text-secondary);
  cursor: pointer;
  padding: 0.5rem;
  transition: color var(--t-fast);
}

.password-toggle:hover {
  color: var(--coral);
}

.btn-submit {
  width: 100%;
  padding: 1rem;
  background: var(--coral);
  color: white;
  border: none;
  border-radius: 12px;
  font-size: 1rem;
  font-weight: 700;
  cursor: pointer;
  transition: all var(--t-base);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
}

.btn-submit:hover {
  background: var(--coral-dark);
  transform: translateY(-2px);
  box-shadow: 0 8px 20px var(--coral-glow);
}

.auth-alert {
  background: rgba(239, 68, 68, 0.1);
  border: 1px solid rgba(239, 68, 68, 0.3);
  border-radius: 12px;
  padding: 1rem;
  margin-bottom: 1.5rem;
  display: flex;
  align-items: center;
  gap: 0.75rem;
  color: var(--danger);
  font-size: 0.875rem;
}

.auth-footer {
  border-top: 1px solid var(--glass-border);
  padding: 1.75rem 2rem;
  text-align: center;
  background: var(--bg-secondary);
}

.auth-footer p {
  font-size: 0.875rem;
  color: var(--text-secondary);
  margin: 0;
}

.auth-link {
  color: var(--coral);
  text-decoration: none;
  font-weight: 600;
  transition: color var(--t-fast);
}

.auth-link:hover {
  color: var(--coral-light);
  text-decoration: underline;
}

@media (max-width: 480px) {
  .auth-card {
    border-radius: 16px;
  }
  .auth-header, .auth-body, .auth-footer {
    padding: 2rem 1.5rem;
  }
}
</style>
{% endblock %}

{% block content %}
<div class="auth-page">
  <div class="auth-card">
    <div class="auth-header">
      <div class="auth-icon">
        <i class="bi bi-box-arrow-in-right"></i>
      </div>
      <h1>Welcome Back</h1>
      <p>Sign in to your iZoza account</p>
    </div>
    
    <div class="auth-body">
      <form method="post">
        {% csrf_token %}
        
        {% if form.errors %}
        <div class="auth-alert">
          <i class="bi bi-exclamation-circle"></i>
          <span>Invalid username or password</span>
        </div>
        {% endif %}
        
        <div class="form-group">
          <label for="id_username" class="form-label">Username</label>
          <input 
            type="text" 
            name="username" 
            id="id_username" 
            class="form-input" 
            placeholder="Enter your username"
            required
          >
        </div>
        
        <div class="form-group">
          <label for="id_password" class="form-label">Password</label>
          <div class="password-wrapper">
            <input 
              type="password" 
              name="password" 
              id="id_password" 
              class="form-input" 
              placeholder="Enter your password"
              required
            >
            <button type="button" class="password-toggle" id="togglePassword">
              <i class="bi bi-eye" id="toggleIcon"></i>
            </button>
          </div>
        </div>
        
        <button type="submit" class="btn-submit">
          <i class="bi bi-box-arrow-in-right"></i>
          <span>Sign In</span>
        </button>
      </form>
    </div>
    
 <div class="auth-footer">
  <p class="mb-3">
    New to iZoza?
  </p>
  <div style="display: flex; gap: 0.75rem; justify-content: center; flex-wrap: wrap;">
    <a href="{% url 'signup_buyer' %}" class="btn" style="
      padding: 0.7rem 1.5rem;
      background: var(--coral);
      color: white;
      border-radius: 10px;
      font-weight: 600;
      font-size: 0.875rem;
      text-decoration: none;
      transition: all 0.2s;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    ">
      <i class="bi bi-person-plus"></i>
      Join as Buyer
    </a>
    <a href="{% url 'signup_seller' %}" class="btn" style="
      padding: 0.7rem 1.5rem;
      background: transparent;
      color: var(--coral);
      border: 1.5px solid var(--coral);
      border-radius: 10px;
      font-weight: 600;
      font-size: 0.875rem;
      text-decoration: none;
      transition: all 0.2s;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    ">
      <i class="bi bi-shop"></i>
      Become a Seller
    </a>
  </div>
</div>

  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const toggleBtn = document.getElementById('togglePassword');
  const passwordInput = document.getElementById('id_password');
  const toggleIcon = document.getElementById('toggleIcon');
  
  if (toggleBtn) {
    toggleBtn.addEventListener('click', function() {
      if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        toggleIcon.className = 'bi bi-eye-slash';
      } else {
        passwordInput.type = 'password';
        toggleIcon.className = 'bi bi-eye';
      }
    });
  }
});
</script>
{% endblock %}